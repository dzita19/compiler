Parsing finished successfully.

Symtab: [
 Predefined types:
 void
  (*) to void
   function(int32) returning (*) to void
  function((*) to void) returning void
  function(void) returning void
 int8
  const int8
   (*) to const int8
 uint8
 int16
 uint16
 int32
  function(int32) returning int32
  function((*) to const int8, ...) returning int32
  function(<nonprototype>) returning int32
  (*) to int32
 uint32
 int64
 uint64

 Scope: file [
  Obj: variable [
   Name: putchar; Address: 0; Definition: declared; Storage: static; Linkage: external;
   Type: [function(int32) returning int32]
  ]
  Obj: variable [
   Name: printf; Address: 0; Definition: declared; Storage: static; Linkage: external;
   Type: [function((*) to const int8, ...) returning int32]
  ]
  Obj: variable [
   Name: malloc; Address: 0; Definition: declared; Storage: static; Linkage: external;
   Type: [function(int32) returning (*) to void]
  ]
  Obj: variable [
   Name: free; Address: 0; Definition: declared; Storage: static; Linkage: external;
   Type: [function((*) to void) returning void]
  ]
  Obj: variable [
   Name: print_malloc_frames; Address: 0; Definition: declared; Storage: static; Linkage: external;
   Type: [function(void) returning void]
  ]
  Obj: tag [
   Name: str1; Tag type: struct; Definition: defined; Size: 4; Align: 4
   Type: [
    struct str1: int32 x (0)
     (*) to struct str1
   ]
  ]
  Obj: tag [
   Name: str2; Tag type: struct; Definition: defined; Size: 8; Align: 4
   Type: [
    struct str2: int32 a (0), struct str1 b (4)
     (*) to struct str2
      (*) to (*) to struct str2
       (*) to (*) to (*) to struct str2
   ]
  ]
  Obj: variable [
   Name: main; Address: 32; Definition: defined; Storage: static; Linkage: external;
   Type: [function(<nonprototype>) returning int32]
  ]
  Scope: function prototype [
   Scope: block [
    Obj: variable [
     Name: a1; Address: 4; Definition: defined; Storage: auto; Linkage: none;
     Type: [struct str1]
    ]
    Obj: variable [
     Name: b1; Address: 8; Definition: defined; Storage: auto; Linkage: none;
     Type: [struct str1]
    ]
    Obj: variable [
     Name: a2; Address: 16; Definition: defined; Storage: auto; Linkage: none;
     Type: [struct str2]
    ]
    Obj: variable [
     Name: b2; Address: 24; Definition: defined; Storage: auto; Linkage: none;
     Type: [struct str2]
    ]
    Obj: variable [
     Name: p; Address: 28; Definition: defined; Storage: auto; Linkage: none;
     Type: [(*) to struct str2]
    ]
    Obj: variable [
     Name: q; Address: 32; Definition: defined; Storage: auto; Linkage: none;
     Type: [(*) to (*) to struct str2]
    ]
   ]
   Scope: function [
   ]
  ]
 ]
]

Static objects list: [
]

Label names list: [
 Obj name: main
]

Global names list: [
 Obj name: main
]

Extern names list: [
 Obj name: putchar
 Obj name: printf
 Obj name: malloc
 Obj name: free
 Obj name: print_malloc_frames
]

String table: [
]

Translation unit ::
-Function body :: [FDEF] Name: main;
--Function prologue ::
--Initialization ::
---Assign :: [RVAL] Type: int32; Address: 0;
----Deref pointer :: [LVAL] Address: 0; Type: int32;
-----Address of :: [ADDR] Name: b2; Address: 0; Type: (*) to int32;
----Constant :: [NUMLIT] Type: int32; Value: 1;
---Assign :: [RVAL] Type: int32; Address: 0;
----Deref pointer :: [LVAL] Address: 0; Type: int32;
-----Address of :: [ADDR] Name: b2; Address: 4; Type: (*) to int32;
----Constant :: [NUMLIT] Type: int32; Value: 2;
--Expression statement ::
---Assign :: [RVAL] Type: struct str1; Address: 0;
----Deref pointer :: [LVAL] Address: 0; Type: struct str1;
-----Field ref :: [RVAL] Type: (*) to struct str1; Address: 4;
------Deref pointer :: [LVAL] Address: 0; Type: (*) to struct str2;
-------Address of :: [ADDR] Name: p; Address: 0; Type: (*) to (*) to struct str2;
----Deref pointer :: [LVAL] Address: 0; Type: struct str1;
-----Address of :: [ADDR] Name: a1; Address: 0; Type: (*) to struct str1;
--Expression statement ::
---Assign :: [RVAL] Type: struct str1; Address: 0;
----Deref pointer :: [LVAL] Address: 0; Type: struct str1;
-----Field ref :: [RVAL] Type: (*) to struct str1; Address: 4;
------Deref pointer :: [LVAL] Address: 0; Type: (*) to struct str2;
-------Deref pointer :: [LVAL] Address: 0; Type: (*) to (*) to struct str2;
--------Address of :: [ADDR] Name: q; Address: 0; Type: (*) to (*) to (*) to struct str2;
----Deref pointer :: [LVAL] Address: 0; Type: struct str1;
-----Address of :: [ADDR] Name: a1; Address: 0; Type: (*) to struct str1;
--Function epilogue ::

Memory safety report: [
-Symtab: [
--Symtab          allocated =    1, freed =    1;
--Scope           allocated =    9, freed =    9;
--Obj             allocated =   23, freed =   23;
--Struct          allocated =   19, freed =   19;
--StaticVal       allocated =    0, freed =    0;
-]
-Utility: [
--LinkedList      allocated =   13, freed =   13;
--Node            allocated =   81, freed =   81;
--String          allocated =   37, freed =   37;
--Vector          allocated =    4, freed =    4;
--Array           allocated =    0, freed =    0;
-]
-Declarations: [
--TypeFrame       allocated =    9, freed =    9;
--NameFrame       allocated =    7, freed =    7;
--InitFrame       allocated =    2, freed =    2;
--ConstExpr       allocated =    0, freed =    0;
-]
-Statements: [
--TreeNode        allocated =   30, freed =   30;
--Tree            allocated =    1, freed =    1;
--Numlit          allocated =    2, freed =    2;
--ExprNode        allocated =   24, freed =   24;
-]
-Generating: [
--CallFrame       allocated =    0, freed =    0;
--ArgAlloc        allocated =    0, freed =    0;
--LogicNode       allocated =    0, freed =    0;
--StackAlloc      allocated =    0, freed =    0;
--MemAlloc        allocated =    2, freed =    2;
--IrInstr         allocated =   36, freed =   36;
-]
]

Semantic analysis successful.
